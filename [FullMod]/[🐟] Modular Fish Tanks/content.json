{
  "$schema": "https://smapi.io/schemas/content-patcher.json",
  "Format": "2.7.0",
  "ConfigSchema": {
    "WaterColor": {
      "Default": "",
      "AllowBlank": true
    },
    "WaterAlpha": {
      "Default": "0.5",
      "AllowBlank": true
    }
  },
  "Changes": [
    // i18n
    {
      "LogName": "LocalizedText i18n",
      "Action": "Load",
      "Target": "{{ModId}}.i18n",
      "FromFile": "i18n/default.json",
      "Priority": "Low"
    },
    {
      "LogName": "LocalizedText i18n",
      "Action": "Load",
      "Target": "{{ModId}}.i18n",
      "FromFile": "i18n/{{Language}}.json",
      "Priority": "Medium",
      "When": {
        "HasFile:{{FromFile}}": true
      }
    },
    // single modular tanks
    {
      "Action": "Include",
      "FromFile": "data/modutank.json",
      "LocalTokens": {
        "L@Seq": "floor_01",
        "L@Type": "fishtank",
        "L@Size": "2 4/2 1",
        "L@Tank": "4 0 64 128 164"
      }
    },
    {
      "Action": "Include",
      "FromFile": "data/modutank.json",
      "LocalTokens": {
        "L@Seq": "floor_02",
        "L@Type": "fishtank",
        "L@Size": "2 4/2 1",
        "L@Tank": "4 0 64 128 164"
      }
    },
    {
      "Action": "Include",
      "FromFile": "data/modutank.json",
      "LocalTokens": {
        "L@Seq": "wall_01",
        "L@Type": "painting",
        "L@Size": "1 3/1 3",
        "L@Tank": "2 0 40 64 120"
      }
    },
    {
      "Action": "Include",
      "FromFile": "data/modutank.json",
      "LocalTokens": {
        "L@Seq": "wall_02",
        "L@Type": "painting",
        "L@Size": "1 3/1 3",
        "L@Tank": "2 0 40 64 96"
      }
    },
    {
      "Action": "Include",
      "FromFile": "data/modutank.json",
      "LocalTokens": {
        "L@Seq": "wall_03",
        "L@Type": "painting",
        "L@Size": "2 3/2 3",
        "L@Tank": "4 0 40 128 144"
      }
    },
    // pair modular tanks
    {
      "Action": "Include",
      "FromFile": "data/dualmodutank.json",
      "LocalTokens": {
        "L@Seq": "floor_01",
        "L@Type": "fishtank",
        "L@Size": "2 4/2 1",
        "L@Tank": "6 0 64 128 192",
        "L@Pt2Idx": "64"
      }
    },
    {
      "Action": "Include",
      "FromFile": "data/dualmodutank.json",
      "LocalTokens": {
        "L@Seq": "wall_01",
        "L@Type": "painting",
        "L@Size": "2 3/2 3",
        "L@Tank": "4 0 40 128 164",
        "L@Pt2Idx": "48"
      }
    },
    // watery tank
    {
      "Action": "Include",
      "FromFile": "data/waterytank.json",
    },
    // watery deco
    {
      "Action": "Include",
      "FromFile": "data/waterydeco.json",
      "LocalTokens": {
        "L@Len": "1"
      }
    },
    {
      "Action": "Include",
      "FromFile": "data/waterydeco.json",
      "LocalTokens": {
        "L@Len": "2"
      }
    },
    {
      "Action": "Include",
      "FromFile": "data/waterydeco.json",
      "LocalTokens": {
        "L@Len": "3"
      }
    },
    {
      "Action": "Include",
      "FromFile": "data/waterydeco.json",
      "LocalTokens": {
        "L@Len": "4"
      }
    },
    // add watery effect to tank_wall_02 and tank_wall_03
    {
      "Action": "EditData",
      "Target": "mushymato.MMAP/FurnitureProperties",
      "Fields": {
        "{{ModId}}_modu_wall_02": {
          "DrawLayers": [
            {
              "Id": "Watery",
              "Texture": "LooseSprites/Cursors",
              "SourceRect": {
                "X": 0,
                "Y": 2128,
                "Width": 64,
                "Height": 192
              },
              "FrameCount": 10,
              "FrameDuration": 180,
              "DrawPosition": "0,0",
              "SortTileOffset": -0.0001
            }
          ],
          "Metadata": {
            "mushymato.MMAP/DrawLayer.Watery.scale": "1",
            "mushymato.MMAP/DrawLayer.Watery.alpha": "{{query: {{WaterAlpha}} / 2}}",
            "mushymato.MMAP/DrawLayer.Watery.color": "{{WaterColor}}"
          }
        },
        "{{ModId}}_modu_wall_03": {
          "DrawLayers": [
            {
              "Id": "Watery",
              "Texture": "LooseSprites/Cursors",
              "SourceRect": {
                "X": 0,
                "Y": 2000,
                "Width": 128,
                "Height": 152
              },
              "FrameCount": 5,
              "FrameDuration": 180,
              "DrawInBackground": true,
              "DrawPosition": "0,2"
            }
          ],
          "Metadata": {
            "mushymato.MMAP/DrawLayer.Watery.scale": "1",
            "mushymato.MMAP/DrawLayer.Watery.alpha": "{{query: {{WaterAlpha}} / 2}}",
            "mushymato.MMAP/DrawLayer.Watery.color": "{{WaterColor}}"
          }
        },
      }
    }
  ]
}